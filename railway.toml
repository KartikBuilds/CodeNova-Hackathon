# =============================================================================
# RAILWAY MONOREPO CONFIGURATION - AUTO-GENERATED
# Generated by monorepo-detector.py
# Monorepo Type: npm-workspaces
# =============================================================================

[build]
# Use Nixpacks for intelligent build detection
builder = "NIXPACKS"

[deploy]
# Primary service (backend server)
startCommand = "npm run start --workspace=server"
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 10

# =============================================================================
# PER-APP CONFIGURATION
# =============================================================================

# BACKEND SERVER
# Location: server/
# Type: Backend API
# Port: 5000
# Start: npm run start --workspace=server
# Build: (none - Node.js server doesn't require build)

# FRONTEND APP
# Location: apps/client/frontend/
# Type: Frontend (React + Vite)
# Port: 3000
# Start: npm run preview --workspace=apps/client/frontend
# Build: npm run build --workspace=apps/client/frontend

# =============================================================================
# ENVIRONMENT VARIABLES NEEDED
# =============================================================================

[env]
NODE_ENV = "production"
PORT = "5000"

# MongoDB Configuration (if using MongoDB Atlas)
# MONGODB_URI = "mongodb+srv://user:pass@cluster.mongodb.net/dbname"

# JWT Secret for authentication
# JWT_SECRET = "your-secret-key"

# API Base URL
# VITE_API_URL = "https://your-railway-app.up.railway.app/api"

# =============================================================================
# DEPLOYMENT INSTRUCTIONS
# =============================================================================

# 1. Set environment variables in Railway dashboard under "Variables"
# 2. Create services:
#    a. Backend service:
#       - Root Directory: /server (or leave empty for monorepo root)
#       - Start Command: npm run start --workspace=server
#       - Port: 5000
#    
#    b. Frontend service (optional):
#       - Root Directory: /apps/client/frontend
#       - Build Command: npm run build
#       - Start Command: npm run preview
#       - Port: 3000

# 3. Deploy via: railway up
